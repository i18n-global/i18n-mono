# Dual Parser Architecture

## ê°œìš”

i18nexus-tools v1.7.2ë¶€í„° ë‘ ê°€ì§€ íŒŒì„œë¥¼ ë™ì‹œì— ì§€ì›í•©ë‹ˆë‹¤:

1. **Babel Parser** (`@babel/parser`) - ê¸°ì¤€ ì„±ëŠ¥ (baseline)
2. **swc Parser** (`@swc/core`) - ê³ ì† ì„±ëŠ¥ (ì•½ 20ë°° ë¹ ë¦„)

ì´ëŸ¬í•œ ì´ì¤‘ êµ¬ì¡°ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ë‘ íŒŒì„œì˜ ì„±ëŠ¥ì„ ì§ì ‘ ë¹„êµí•˜ê³  ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì‚¬ìš© ë°©ë²•

### 1. CLI ëª…ë ¹ì–´ë¡œ íŒŒì„œ ì„ íƒ

#### swc íŒŒì„œ ì‚¬ìš© (ê¸°ë³¸ê°’, ê¶Œì¥)

```bash
# ì¼ë°˜ wrapper ëª…ë ¹ (ê¸°ë³¸ì ìœ¼ë¡œ swc ì‚¬ìš©)
npx i18n-wrapper

# ëª…ì‹œì ìœ¼ë¡œ swc ì‚¬ìš©
npx i18n-wrapper-swc
```

#### Babel íŒŒì„œ ì‚¬ìš© (ì„±ëŠ¥ ë¹„êµìš©)

```bash
npx i18n-wrapper-babel
```

### 2. í”„ë¡œê·¸ë˜ë§¤í‹± ì‚¬ìš©

```typescript
import { runTranslationWrapper } from "i18nexus-tools";

// swc íŒŒì„œ ì‚¬ìš©
await runTranslationWrapper({
  parserType: "swc",
  sourcePattern: "src/**/*.{ts,tsx}",
});

// Babel íŒŒì„œ ì‚¬ìš©
await runTranslationWrapper({
  parserType: "babel",
  sourcePattern: "src/**/*.{ts,tsx}",
});
```

## ì„±ëŠ¥ ë¹„êµ

### ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰

í”„ë¡œì íŠ¸ì—ì„œ ì§ì ‘ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ë ¤ë©´:

```bash
# ë¹Œë“œ (í•„ìš”ì‹œ)
npm run build

# ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰
node dist/bin/benchmark.js
```

ë²¤ì¹˜ë§ˆí¬ëŠ” dry-run ëª¨ë“œë¡œ ì‹¤í–‰ë˜ì–´ íŒŒì¼ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ìˆœìˆ˜ íŒŒì‹±/ë³€í™˜ ì„±ëŠ¥ë§Œ ì¸¡ì •í•©ë‹ˆë‹¤.

### ì˜ˆìƒ ê²°ê³¼ (1,000ê°œ íŒŒì¼ ê¸°ì¤€)

| ì‘ì—…        | Babel    | swc     | ê°œì„ ìœ¨      |
| ----------- | -------- | ------- | ----------- |
| AST íŒŒì‹±    | 22,500ms | 1,100ms | **20x** âš¡  |
| ì „ì²´ ì‹œê°„   | 30,200ms | 9,000ms | **3.3x** âš¡ |
| íŒŒì¼ë‹¹ í‰ê·  | 30.2ms   | 9.0ms   | **3.3x** âš¡ |

## ì–¸ì œ ì–´ë–¤ íŒŒì„œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜?

### swc íŒŒì„œ (ê¶Œì¥)

- âœ… ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ (100ê°œ ì´ìƒ íŒŒì¼)
- âœ… CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ë¹ ë¥¸ ë¹Œë“œ í•„ìš”
- âœ… ê°œë°œ ì¤‘ ë¹ ë¥¸ í”¼ë“œë°± ì›í•  ë•Œ
- âœ… ì¼ë°˜ì ì¸ TypeScript/JSX/TSX ì½”ë“œ

### Babel íŒŒì„œ

- âœ… ì„±ëŠ¥ ë¹„êµ/ë²¤ì¹˜ë§ˆí¬ ëª©ì 
- âœ… ë§¤ìš° experimentalí•œ ë¬¸ë²• ì‚¬ìš© (swcê°€ ì•„ì§ ì§€ì› ì•ˆ í•˜ëŠ” ê²½ìš°)
- âœ… ë””ë²„ê¹… ëª©ì  (Babel ASTê°€ ë” ìµìˆ™í•œ ê²½ìš°)
- âœ… ì†Œê·œëª¨ í”„ë¡œì íŠ¸ (10ê°œ ë¯¸ë§Œ íŒŒì¼, ì„±ëŠ¥ ì°¨ì´ ë¯¸ë¯¸)

## ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

### ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   i18n-wrapper (ê¸°ë³¸ CLI)               â”‚
â”‚   - ê¸°ë³¸ì ìœ¼ë¡œ swc ì‚¬ìš©                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ i18n-wrapper-swc    â”‚        â”‚ i18n-wrapper-babel      â”‚
â”‚ (swc íŒŒì„œ ëª…ì‹œ)      â”‚        â”‚ (Babel íŒŒì„œ ëª…ì‹œ)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ TranslationWrapper  â”‚
              â”‚ - parseFile()       â”‚
              â”‚ - generateCode()    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ swc-utils   â”‚           â”‚ babel-parser-  â”‚
    â”‚             â”‚           â”‚ utils          â”‚
    â”‚ - parseFile â”‚           â”‚ - parseFile    â”‚
    â”‚   WithSwc() â”‚           â”‚   WithBabel()  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### íŒŒì¼ êµ¬ì¡°

```
bin/
  i18n-wrapper.ts           # ê¸°ë³¸ CLI (swc ì‚¬ìš©)
  i18n-wrapper-swc.ts       # swc ì „ìš© CLI
  i18n-wrapper-babel.ts     # Babel ì „ìš© CLI
  benchmark.ts              # ì„±ëŠ¥ ë¹„êµ ë„êµ¬

scripts/
  t-wrapper.ts              # ë©”ì¸ ë¡œì§ (íŒŒì„œ ë…ë¦½ì )
  swc-utils.ts              # swc íŒŒì„œ ë˜í¼
  babel-parser-utils.ts     # Babel íŒŒì„œ ë˜í¼
```

### í˜¸í™˜ì„±

- **AST êµ¬ì¡°**: ë‘ íŒŒì„œ ëª¨ë‘ Babel í˜¸í™˜ AST ë°˜í™˜
- **ë³€í™˜ ë¡œì§**: íŒŒì„œì— ê´€ê³„ì—†ì´ ë™ì¼í•œ `@babel/traverse` ì‚¬ìš©
- **ì½”ë“œ ìƒì„±**: íŒŒì„œì— ê´€ê³„ì—†ì´ ë™ì¼í•œ `@babel/generator` ì‚¬ìš©
- **ê²°ê³¼ë¬¼**: ë‘ íŒŒì„œì˜ ì¶œë ¥ ì½”ë“œëŠ” ë™ì¼í•¨ (ì„±ëŠ¥ë§Œ ë‹¤ë¦„)

### ì˜ì¡´ì„±

```json
{
  "dependencies": {
    "@babel/parser": "^7.23.4", // Babel íŒŒì„œ
    "@babel/traverse": "^7.23.4", // AST ìˆœíšŒ (ê³µí†µ)
    "@babel/generator": "^7.23.4", // ì½”ë“œ ìƒì„± (ê³µí†µ)
    "@babel/types": "^7.23.4", // AST íƒ€ì… (ê³µí†µ)
    "@swc/core": "^1.15.1" // swc íŒŒì„œ
  }
}
```

## ì„±ëŠ¥ ë¡œê¹…

ë‘ íŒŒì„œ ëª¨ë‘ ìƒì„¸í•œ ì„±ëŠ¥ ë¡œê¹…ì„ ì§€ì›í•©ë‹ˆë‹¤:

```bash
# swcë¡œ ì‹¤í–‰í•˜ë©´ì„œ ìƒì„¸ ë¡œê·¸ í™•ì¸
I18N_PERF_VERBOSE=true npx i18n-wrapper-swc

# Babelë¡œ ì‹¤í–‰í•˜ë©´ì„œ ìƒì„¸ ë¡œê·¸ í™•ì¸
I18N_PERF_VERBOSE=true npx i18n-wrapper-babel
```

ì¶œë ¥ ì˜ˆì‹œ:

```
ğŸš€ Starting translation wrapper with swc (20x faster) parser...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Translation Wrapper Completed
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š Overall Statistics:
   Total Time:        2345ms
   Files Processed:   50 files
   Avg per File:      46.9ms/file

â±ï¸  Time Breakdown:
   ğŸ” File Discovery:  125ms (5.3%)
   ğŸ“– File Reading:    234ms (10.0%)
   ğŸ”§ AST Parsing:     351ms (15.0%) - 7.0ms/file
   ğŸ”„ AST Traversal:   1405ms (59.9%) - 28.1ms/file
   âœï¸  Code Gen & I/O:  230ms (9.8%)

ğŸ’¡ Performance Info:
   Parser:            swc (20x faster than Babel)
   Parsing Speed:     7024Î¼s/file
```

## ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

ê¸°ì¡´ v1.7.0 ì´í•˜ ë²„ì „ì—ì„œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê²½ìš°:

### ë³€ê²½ ì‚¬í•­ ì—†ìŒ (ê¸°ë³¸ ë™ì‘)

```bash
# ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥
npx i18n-wrapper
```

ê¸°ë³¸ì ìœ¼ë¡œ swcë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìë™ìœ¼ë¡œ ì„±ëŠ¥ì´ í–¥ìƒë©ë‹ˆë‹¤.

### ëª…ì‹œì ìœ¼ë¡œ Babel ì‚¬ìš©í•˜ë ¤ë©´

```bash
# Babelì´ í•„ìš”í•œ ê²½ìš°
npx i18n-wrapper-babel

# ë˜ëŠ” ì½”ë“œì—ì„œ
runTranslationWrapper({ parserType: 'babel' });
```

## ë¬¸ì œ í•´ê²°

### swc íŒŒì‹± ì—ëŸ¬

```bash
# Babelë¡œ í´ë°±
npx i18n-wrapper-babel
```

ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë‘ íŒŒì„œëŠ” ë™ì¼í•œ ê²°ê³¼ë¥¼ ìƒì„±í•˜ì§€ë§Œ, ë§¤ìš° experimentalí•œ ë¬¸ë²•ì˜ ê²½ìš° swcê°€ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì„±ëŠ¥ ì°¨ì´ê°€ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ê²½ìš°

```bash
# ë²¤ì¹˜ë§ˆí¬ë¡œ ì •í™•í•œ ì¸¡ì •
node dist/bin/benchmark.js
```

- íŒŒì¼ ìˆ˜ê°€ ì ìœ¼ë©´ (< 10ê°œ) ì°¨ì´ê°€ ë¯¸ë¯¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì²« ì‹¤í–‰ì€ JIT ì»´íŒŒì¼ë¡œ ëŠë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ë„¤íŠ¸ì›Œí¬/ë””ìŠ¤í¬ I/Oê°€ ë³‘ëª©ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤

## FAQ

### Q: ê¸°ë³¸ `i18n-wrapper`ëŠ” ì–´ë–¤ íŒŒì„œë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?

A: swcë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤ (20ë°° ë¹ ë¥¸ ì„±ëŠ¥).

### Q: Babel íŒŒì„œëŠ” ì™œ ì œê±°í•˜ì§€ ì•Šì•˜ë‚˜ìš”?

A: ì„±ëŠ¥ ë¹„êµ ë° í˜¸í™˜ì„± ëª©ì ìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. ì¼ë¶€ experimental ë¬¸ë²•ì€ swcê°€ ì•„ì§ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Q: ë‘ íŒŒì„œì˜ ì¶œë ¥ ê²°ê³¼ê°€ ë‹¤ë¥¸ê°€ìš”?

A: ì•„ë‹ˆìš”. ë‘ íŒŒì„œ ëª¨ë‘ ë™ì¼í•œ Babel ASTë¥¼ ìƒì„±í•˜ê³ , ë™ì¼í•œ ë³€í™˜ ë¡œì§ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì¶œë ¥ì€ ë™ì¼í•©ë‹ˆë‹¤. ì„±ëŠ¥ë§Œ ì°¨ì´ê°€ ë‚©ë‹ˆë‹¤.

### Q: í”„ë¡œë•ì…˜ì—ì„œ ì–´ë–¤ íŒŒì„œë¥¼ ê¶Œì¥í•˜ë‚˜ìš”?

A: swcë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. í›¨ì”¬ ë¹ ë¥´ê³  ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë¬¸ì œì—†ì´ ë™ì‘í•©ë‹ˆë‹¤.

### Q: ì„±ëŠ¥ ì°¨ì´ëŠ” ì–¼ë§ˆë‚˜ ë‚˜ë‚˜ìš”?

A: í”„ë¡œì íŠ¸ ê·œëª¨ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ:

- 100ê°œ íŒŒì¼: ~2-3ë°° ë¹ ë¦„
- 1,000ê°œ íŒŒì¼: ~3-4ë°° ë¹ ë¦„
- 10,000ê°œ íŒŒì¼: ~5-10ë°° ë¹ ë¦„

AST íŒŒì‹± ìì²´ëŠ” 20ë°° ë¹ ë¥´ì§€ë§Œ, ì „ì²´ í”„ë¡œì„¸ìŠ¤(I/O, ìˆœíšŒ ë“±)ë¥¼ ê³ ë ¤í•˜ë©´ 3-4ë°° ì •ë„ í–¥ìƒë©ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

- [swc ê³µì‹ ë¬¸ì„œ](https://swc.rs/)
- [Babel ê³µì‹ ë¬¸ì„œ](https://babeljs.io/)
- [ì„±ëŠ¥ ë¡œê¹… ê°€ì´ë“œ](./PERFORMANCE_LOGGING.md)
- [ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš](./docs/migration/BABEL_TO_SWC_MIGRATION.md)
